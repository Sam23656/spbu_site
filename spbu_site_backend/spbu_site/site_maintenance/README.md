# Система технических работ

Это Django приложение для управления режимом технических работ на сайте.

## Возможности

- ✅ Включение/выключение режима технических работ
- ✅ Настройка заголовка и сообщения для пользователей
- ✅ Установка времени начала и ожидаемого завершения работ
- ✅ Автоматический таймер обратного отсчета
- ✅ Автоматическое перенаправление всех посетителей на страницу тех. работ
- ✅ Управление через Django админку

## Установка

1. Приложение уже добавлено в `INSTALLED_APPS`
2. Middleware добавлен в `MIDDLEWARE`
3. URL маршруты настроены

## Использование

### 1. Через Django админку

1. Зайдите в Django админку: `/admin/`
2. Найдите раздел "Технические работы"
3. Создайте новый режим тех. работ или отредактируйте существующий
4. Установите флажок "Активен режим тех. работ"
5. Заполните заголовок и сообщение
6. Установите время начала и ожидаемое завершения
7. Сохраните

### 2. Автоматическое перенаправление

Когда режим тех. работ активен:

- Все посетители автоматически перенаправляются на `/maintenance`
- Исключения: админка (`/admin/`), API тех. работ (`/api/maintenance/`)
- Страница тех. работ показывает таймер обратного отсчета

### 3. API

- **GET** `/api/maintenance/status/` - получить текущий статус тех. работ
- Не требует аутентификации
- Возвращает JSON с информацией о тех. работах

## Структура файлов

```
site_maintenance/
├── models.py          # Модель MaintenanceMode
├── admin.py           # Админка Django
├── views.py           # API представления
├── serializers.py     # DRF сериализаторы
├── urls.py            # URL маршруты
├── middleware.py      # Middleware для перенаправления
└── apps.py            # Конфигурация приложения
```

## Модель данных

### MaintenanceMode

- `is_active` - активен ли режим тех. работ
- `title` - заголовок страницы тех. работ
- `message` - сообщение для пользователей
- `start_time` - время начала работ
- `estimated_end_time` - ожидаемое время завершения
- `created_at` - дата создания
- `updated_at` - дата обновления

## Безопасность

- API тех. работ доступен без аутентификации
- Middleware исключает админку из проверки
- Автоматическое деактивация других режимов при активации нового

## Фронтенд

React компонент `MaintenancePage` автоматически:

- Получает статус тех. работ через API
- Показывает таймер обратного отсчета
- Обновляет данные каждую секунду
- Адаптивен для мобильных устройств
